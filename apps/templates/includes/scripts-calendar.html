<script>

  const LABEL_VALUES={
    0:'Anger',
    1:'Contempt',
    2:'Disgust',
    3:'Fear',
    4:'Happy',
    5:'Sad',
    6:'Surprise',
    7:'Neutral'
  };

    
    const Calendar = tui.Calendar;

    const calendar = new Calendar('#calendar', {
        defaultView: 'month',
        taskView: true,
        scheduleView: true,
        template: {
            monthDayname: function(dayname) {
            return '<span class="calendar-week-dayname-name">' + dayname.label + '</span>';
            }
        }
    });

    // calendar.createSchedules([
    // {
    //     id: '1',
    //     calendarId: '1',
    //     title: 'my schedule',
    //     category: 'time',
    //     dueDateClass: '',
    //     start: '2021-12-26T22:30:00+09:00',
    //     end: '2021-12-27T02:30:00+09:00'
    // },
    // {
    //     id: '2',
    //     calendarId: '1',
    //     title: 'second schedule',
    //     category: 'time',
    //     dueDateClass: '',
    //     start: '2021-12-28T17:30:00+09:00',
    //     end: '2021-12-29T17:31:00+09:00',
    //     isReadOnly: true    // schedule is read-only
    // }
    // ]);
    $(function(){
        $.ajax({
            url:'/fetch_diary',
            method: 'POST',
            success:function(response){
                const schedules=response.result.map(function(x){
                    let emotion=null;
                    switch(x.eid){
                        case 1:{
                            emotion = 'event-happy'
                            break;
                        }
                        default:{
                            break;
                        }
                    }
                    return {
                        id:x.id,
                        // calendarId: '1',
                        // title:x.title,
                        title:LABEL_VALUES[x.id],
                        body:x.content,
                        category: 'time',
                        start:x.post_datetime,
                        isAllDay:true,
                        customStyle: emotion
                    }
                })
                console.log(schedules);
                calendar.createSchedules(schedules);
            }
        })
    });

</script>

<style>
    .event-happy{
        color:'white';
        background-color:'cyan';
    }
</style>